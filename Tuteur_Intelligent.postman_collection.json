{
    "info": {
        "name": "Module Tuteur Intelligent",
        "description": "Collection compl√®te pour tester le syst√®me tuteur m√©dical intelligent",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "variable": [
        {
            "key": "BASE_URL",
            "value": "http://localhost:8000",
            "type": "string"
        },
        {
            "key": "TOKEN",
            "value": "",
            "type": "string"
        },
        {
            "key": "SESSION_ID",
            "value": "",
            "type": "string"
        }
    ],
    "item": [
        {
            "name": "üîê Authentification",
            "item": [
                {
                    "name": "Obtenir Token",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "if (pm.response.code === 200) {",
                                    "    const response = pm.response.json();",
                                    "    pm.collectionVariables.set('TOKEN', response.token);",
                                    "    console.log('Token sauvegard√©:', response.token);",
                                    "}"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"username\": \"tuteur_test\",\n    \"password\": \"test123\"\n}"
                        },
                        "url": {
                            "raw": "{{BASE_URL}}/api-token-auth/",
                            "host": ["{{BASE_URL}}"],
                            "path": ["api-token-auth", ""]
                        },
                        "description": "Obtient un token d'authentification pour acc√©der aux APIs"
                    }
                }
            ]
        },
        {
            "name": "üí¨ Interactions Chat",
            "item": [
                {
                    "name": "Premi√®re Interaction",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "if (pm.response.code === 200) {",
                                    "    const response = pm.response.json();",
                                    "    if (response.success && response.data.session_id) {",
                                    "        pm.collectionVariables.set('SESSION_ID', response.data.session_id);",
                                    "        console.log('Session ID sauvegard√©:', response.data.session_id);",
                                    "    }",
                                    "}"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Token {{TOKEN}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"message\": \"Bonjour, je commence ma formation en m√©decine\"\n}"
                        },
                        "url": {
                            "raw": "{{BASE_URL}}/api/tutor/chat/",
                            "host": ["{{BASE_URL}}"],
                            "path": ["api", "tutor", "chat", ""]
                        },
                        "description": "Premi√®re interaction avec le tuteur - d√©marre une nouvelle session"
                    }
                },
                {
                    "name": "Pr√©senter Sympt√¥mes",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Token {{TOKEN}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"message\": \"Le patient se plaint de maux de t√™te intenses et de fi√®vre √† 38.5¬∞C depuis 2 jours\",\n    \"session_id\": \"{{SESSION_ID}}\"\n}"
                        },
                        "url": {
                            "raw": "{{BASE_URL}}/api/tutor/chat/",
                            "host": ["{{BASE_URL}}"],
                            "path": ["api", "tutor", "chat", ""]
                        },
                        "description": "Pr√©sentation des sympt√¥mes du patient"
                    }
                },
                {
                    "name": "Proposer Diagnostic",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Token {{TOKEN}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"message\": \"Avec ces sympt√¥mes, je pense √† un syndrome grippal. Qu'en pensez-vous ?\",\n    \"session_id\": \"{{SESSION_ID}}\"\n}"
                        },
                        "url": {
                            "raw": "{{BASE_URL}}/api/tutor/chat/",
                            "host": ["{{BASE_URL}}"],
                            "path": ["api", "tutor", "chat", ""]
                        },
                        "description": "Proposition d'un diagnostic"
                    }
                },
                {
                    "name": "Demander Examens",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Token {{TOKEN}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"message\": \"Quels examens compl√©mentaires recommandez-vous pour confirmer ce diagnostic ?\",\n    \"session_id\": \"{{SESSION_ID}}\"\n}"
                        },
                        "url": {
                            "raw": "{{BASE_URL}}/api/tutor/chat/",
                            "host": ["{{BASE_URL}}"],
                            "path": ["api", "tutor", "chat", ""]
                        },
                        "description": "Demande d'examens compl√©mentaires"
                    }
                }
            ]
        },
        {
            "name": "üö® Test D√©tection Erreurs",
            "item": [
                {
                    "name": "Diagnostic Pr√©matur√©",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Token {{TOKEN}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"message\": \"C'est forc√©ment un cancer, je suis s√ªr de mon diagnostic\",\n    \"session_id\": \"{{SESSION_ID}}\"\n}"
                        },
                        "url": {
                            "raw": "{{BASE_URL}}/api/tutor/chat/",
                            "host": ["{{BASE_URL}}"],
                            "path": ["api", "tutor", "chat", ""]
                        },
                        "description": "Test de d√©tection d'erreur - diagnostic pr√©matur√©"
                    }
                },
                {
                    "name": "Prescription Sans Diagnostic",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Token {{TOKEN}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"message\": \"Je prescris des antibiotiques et de la morphine\",\n    \"session_id\": \"{{SESSION_ID}}\"\n}"
                        },
                        "url": {
                            "raw": "{{BASE_URL}}/api/tutor/chat/",
                            "host": ["{{BASE_URL}}"],
                            "path": ["api", "tutor", "chat", ""]
                        },
                        "description": "Test de d√©tection d'erreur - prescription sans diagnostic"
                    }
                },
                {
                    "name": "Jugement du Patient",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Token {{TOKEN}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"message\": \"Le patient ment s√ªrement, il exag√®re ses sympt√¥mes\",\n    \"session_id\": \"{{SESSION_ID}}\"\n}"
                        },
                        "url": {
                            "raw": "{{BASE_URL}}/api/tutor/chat/",
                            "host": ["{{BASE_URL}}"],
                            "path": ["api", "tutor", "chat", ""]
                        },
                        "description": "Test de d√©tection d'erreur - jugement du patient"
                    }
                }
            ]
        },
        {
            "name": "üìä Progression & Sessions",
            "item": [
                {
                    "name": "Consulter Progression",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Token {{TOKEN}}"
                            }
                        ],
                        "url": {
                            "raw": "{{BASE_URL}}/api/tutor/progression/",
                            "host": ["{{BASE_URL}}"],
                            "path": ["api", "tutor", "progression", ""]
                        },
                        "description": "Consulte la progression actuelle de l'utilisateur"
                    }
                },
                {
                    "name": "Cr√©er Nouvelle Session",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Token {{TOKEN}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"niveau_id\": \"niveau_1\"\n}"
                        },
                        "url": {
                            "raw": "{{BASE_URL}}/api/tutor/session/",
                            "host": ["{{BASE_URL}}"],
                            "path": ["api", "tutor", "session", ""]
                        },
                        "description": "Cr√©e une nouvelle session d'apprentissage"
                    }
                },
                {
                    "name": "Terminer Session",
                    "request": {
                        "method": "DELETE",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Token {{TOKEN}}"
                            }
                        ],
                        "url": {
                            "raw": "{{BASE_URL}}/api/tutor/session/{{SESSION_ID}}/",
                            "host": ["{{BASE_URL}}"],
                            "path": ["api", "tutor", "session", "{{SESSION_ID}}", ""]
                        },
                        "description": "Termine la session actuelle"
                    }
                }
            ]
        },
        {
            "name": "üéÆ Test Gamification",
            "item": [
                {
                    "name": "Bonne R√©ponse 1",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Token {{TOKEN}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"message\": \"Je commence par examiner attentivement le patient\",\n    \"session_id\": \"{{SESSION_ID}}\"\n}"
                        },
                        "url": {
                            "raw": "{{BASE_URL}}/api/tutor/chat/",
                            "host": ["{{BASE_URL}}"],
                            "path": ["api", "tutor", "chat", ""]
                        }
                    }
                },
                {
                    "name": "Bonne R√©ponse 2",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Token {{TOKEN}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"message\": \"Je prends ses constantes vitales et j'√©coute ses ant√©c√©dents\",\n    \"session_id\": \"{{SESSION_ID}}\"\n}"
                        },
                        "url": {
                            "raw": "{{BASE_URL}}/api/tutor/chat/",
                            "host": ["{{BASE_URL}}"],
                            "path": ["api", "tutor", "chat", ""]
                        }
                    }
                },
                {
                    "name": "Bonne R√©ponse 3",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Token {{TOKEN}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"message\": \"Je formule plusieurs hypoth√®ses diagnostiques avant de conclure\",\n    \"session_id\": \"{{SESSION_ID}}\"\n}"
                        },
                        "url": {
                            "raw": "{{BASE_URL}}/api/tutor/chat/",
                            "host": ["{{BASE_URL}}"],
                            "path": ["api", "tutor", "chat", ""]
                        }
                    }
                }
            ]
        }
    ]
}